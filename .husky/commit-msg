#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Validar formato de commit message
# Formato esperado: tipo(scope): descripci√≥n
# Ejemplos: feat(chat): agregar validaciones, fix(api): corregir error de conexi√≥n

commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "‚ùå Formato de commit inv√°lido!"
    echo ""
    echo "üìù Formato esperado: tipo(scope): descripci√≥n"
    echo ""
    echo "üè∑Ô∏è  Tipos v√°lidos:"
    echo "   feat:     Nueva funcionalidad"
    echo "   fix:      Correcci√≥n de bug"
    echo "   docs:     Documentaci√≥n"
    echo "   style:    Formato, espacios, etc."
    echo "   refactor: Refactorizaci√≥n de c√≥digo"
    echo "   test:     Agregar o modificar tests"
    echo "   chore:    Tareas de mantenimiento"
    echo "   perf:     Mejoras de performance"
    echo "   ci:       Integraci√≥n continua"
    echo "   build:    Sistema de build"
    echo "   revert:   Revertir cambios"
    echo ""
    echo "‚úÖ Ejemplos v√°lidos:"
    echo "   feat(chat): agregar validaciones de entrada"
    echo "   fix(api): corregir error de conexi√≥n con Mistral"
    echo "   docs: actualizar README con instrucciones"
    echo ""
    exit 1
fi